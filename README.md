# COSC 60 Final Project

## Julian George & Miruna Palaghean

## What is QUIC?

QUIC is a UDP based protocol that is designed to minimize the various overheads of TCP while still retaining the protocol's security and data integrity. It was developed mainly by Google, and has already been deployed in the company's applications. There are several ways QUIC streamlines networking:

- Between two endpoints, a handshake is only necessary when initializing a "connection". Within a connection, endpoints can send data to each other thru multiple streams, decreasing the overhead of a handshake for two frequently-communicating devices. This decreases latency, which is a big reason why adopters have chosen it.
- Multiple frames of different types can be sent in one UDP datagram, decreasing overall packet quantities. For example, one single UDP packet can set up a stream, send data, and close that stream. ACKS can also be "coalesced" in this way. Frames from different streams can also be coalesced, allowing for multiplexing.
- QUIC is bidirectional and supports multiplexing, meaning, for instance, different applications using the same QUIC endpoints can have different streams while sharing the same connection & packets.
- QUIC connections can migrate to different paths, allowing a connection to be retained even as IPs or routing changes.

QUIC also implements congestion control on multiple levels, allowing implementations to limit the amount of connections, streams, and data received. It also implements TCP-like methods to retrieve lost data.Interestingly, while QUIC primarily works on the OSI Model's Transport Layer, it also integrates aspects of the Application Layer as well. QUIC also uniquely brings TLS encryption to the transport layer, instead of leaving it to the Application Layer with protocols like HTTPS.

## How does QUIC work?

First, it's important to note the difference between QUIC Packets and QUIC Frames. Of the types of QUIC Packets, only 1-RTT and 0-RTT (RTT = round trip time) packets contain the bulk of QUIC data. Other packet types include Initial and Handshake packets.

A QUIC connection begins when a client sends a server an Initial packet, containing information that allows for the cryptographic handshake (setting up TLS encryption) and the transport handshake (setting up the connection). Once the handshake is complete, either endpoint can send a STREAM frame to initiate a stream, with the final bits of the stream IDs determining the type of stream. The stream concludes with a STREAM+FIN frame (or can be paused with one of several kinds of congestion control frames, or terminated early by a RESET_STREAM frame).

QUIC Connection IDs are a complicated and essential part of QUIC, allowing for connections to be retained regardless of changes at lower OSI layers. Each endpoint maintains a set of connection IDs generated by and sent by its peer, and any of those connection IDs can be sent with a frame to correlate it with the current connection. The reason for having more than one connection ID is to hinder observers from correlating the same packets with the same connection.

## Is QUIC Good?

A brief search of the internet returns lots of network engineers who are hostile to this new protocol, which went against the glowing appraisals presented by some sources. Here are some of the cons of QUIC

- QUIC goes around decades of network security measures, leading to many just blocking the protocol outright.
- The use of stateless UDP moves much of the stateful logic higher in the OSI model, leading to a lot of unnecessary traffic that needs to be dealt with (instead of TCP where bulky data packets can be rejected if they're not part of a connection).
- It's just so new and seemingly unnecessary except in edge cases when latency is an utmost priority.

## Resources

[RFC 9000](https://datatracker.ietf.org/doc/html/rfc9000#name-packets-and-frames)
[Adding New Protocols](https://scapy.readthedocs.io/en/latest/build_dissect.html)
[What Happens in a TLS Handshake](https://www.cloudflare.com/en-ca/learning/ssl/what-happens-in-a-tls-handshake/)
